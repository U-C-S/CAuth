generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id            Int             @id @default(autoincrement())
  user_name     String          @unique
  password      String
  UserDetails   user_details?
  ServicesOwned service_table[]
  AppsOwned     app_table[]
}

model user_details {
  id      Int    @id @default(autoincrement())
  email   String @unique
  name    String
  User    users  @relation(fields: [usersId], references: [id])
  usersId Int    @unique
}

model service_table {
  id                 Int                     @id @default(autoincrement())
  service_name       String                  @unique
  description        String
  api_base_uri       String
  Provider           users                   @relation(fields: [providerId], references: [id])
  providerId         Int
  ServicesUsedByApps services_used_by_apps[]
}

model app_table {
  id                 Int                     @id @default(autoincrement())
  app_name           String                  @unique
  description        String
  Owner              users                   @relation(fields: [ownerId], references: [id])
  ownerId            Int
  ServicesUsedByApps services_used_by_apps[]
}

model services_used_by_apps {
  id             Int           @id @default(autoincrement())
  App            app_table     @relation(fields: [appTableId], references: [id])
  appTableId     Int
  Service        service_table @relation(fields: [serviceTableId], references: [id])
  serviceTableId Int
  config         Json
}

model keyvalue {
  id    Int    @id @default(autoincrement())
  key   String @unique
  value String
  type  String @default("string")
}
